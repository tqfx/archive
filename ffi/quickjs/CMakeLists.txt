set(OBJECTS $<TARGET_OBJECTS:a>)

if(WIN32)
  set(CMAKE_SHARED_LIBRARY_PREFIX lib)
else()
  set(CMAKE_SHARED_LIBRARY_SUFFIX .so)
endif()

file_scaner(SOURCES RECURSE src)
add_library(aqjs SHARED ${SOURCES} ${OBJECTS})
set_target_properties(aqjs PROPERTIES DEFINE_SYMBOL A_EXPORTS OUTPUT_NAME a)
target_include_directories(aqjs SYSTEM PRIVATE ${QUICKJS_INCLUDE_DIR})
add_library_properties(aqjs PRIVATE alib)
set_library_options(aqjs)

if(QJS_EXECUTABLE)
  add_subdirectory(test)
endif()
